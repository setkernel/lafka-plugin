let markers=[];function lafka_admin_init_store_location_map(){var a=document.getElementById("lafka-shipping-areas-admin-store-map");if(!a)return;let e;try{e=JSON.parse(decodeURIComponent(lafka_admin_map_params.saved_store_address_lat_long))}catch(a){e=null}var n=e?new google.maps.LatLng(e.lat,e.lng):new google.maps.LatLng("-33.8688197","151.2092955");const t=new google.maps.Map(a,{zoom:12}),o=(lafka_add_marker_and_pan(t,n),t.addListener("click",a=>{lafka_add_marker_and_pan(t,a.latLng)}),document.getElementById("lafka-shipping-areas-floating-search-panel-submit").addEventListener("click",()=>{lafka_geocode_address(o,t,"")}),new google.maps.Geocoder),l=lafka_admin_map_params.store_address;document.getElementById("lafka_shipping_store_map_locate").addEventListener("click",()=>{lafka_geocode_address(o,t,l)})}function lafka_geocode_address(a,e,n){let t;t=""===n?document.getElementById("lafka-shipping-areas-search-address").value:n,a.geocode({address:t}).then(({results:a})=>{e.setCenter(a[0].geometry.location),e.setZoom(12),lafka_add_marker_and_pan(e,a[0].geometry.location),lafka_fill_input(a[0].geometry.location)}).catch(a=>alert("Geocode was not successful for the following reason: "+a))}function lafka_add_marker_and_pan(a,e){lafka_delete_markers();var n=new google.maps.Marker({position:e,map:a});a.panTo(e),markers.push(n),lafka_fill_input(e)}function lafka_delete_markers(){for(let a=0;a<markers.length;a++)markers[a].setMap(null)}function lafka_fill_input(a){document.getElementById("store_map_location").value=encodeURIComponent(JSON.stringify(a))}window.addEventListener("DOMContentLoaded",function(){lafka_admin_init_store_location_map()});